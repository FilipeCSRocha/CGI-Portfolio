<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Filipe Rocha – CGI Portfolio</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin:0; background:#0d0d0d; color:white; font-family:ui-sans-serif,system-ui; }
    canvas#bg { position:fixed; inset:0; z-index:-1; }
    .btn { background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.2); border-radius:0.75rem; padding:0.5rem 1rem; }
    .btn:hover { background:rgba(255,255,255,0.2); }
    .tooltip { position:absolute; bottom:125%; left:50%; transform:translateX(-50%); background:rgba(0,0,0,0.85); color:white;
               padding:4px 8px; border-radius:4px; font-size:0.75rem; white-space:nowrap; opacity:0; pointer-events:none; transition:opacity 0.2s; }
    .tool-icon:hover .tooltip { opacity:1; }
  </style>
</head>
<body class="relative">

<canvas id="bg"></canvas>

<!-- HEADER -->
<header class="text-center py-16">
  <h1 class="text-4xl font-bold">Filipe Rocha</h1>
  <p class="text-lg text-gray-400">CGI Artist – Architectural Visualization & Motion</p>
</header>

<!-- ABOUT -->
<section id="about" class="max-w-5xl mx-auto px-6 py-16 grid md:grid-cols-3 gap-12 items-center">
  <div class="md:col-span-1 flex justify-center">
    <img src="Media/images/Profile.jpg" alt="Profile" class="rounded-2xl w-64 h-64 object-cover shadow-lg border border-white/10">
  </div>
  <div class="md:col-span-2">
    <h2 class="text-2xl font-bold mb-4">About Me</h2>
    <p class="text-gray-300 leading-relaxed">
      I am a CGI artist specialized in architectural visualization, producing high-quality stills and animations 
      for real estate, product marketing, and design presentations. Experienced with 3ds Max, V-Ray, Forest Pack, 
      Photoshop, After Effects, and more. Currently working at a marketing company, also exploring Unreal Engine 
      and emerging visualization tools.
    </p>
  </div>
</section>

<!-- TOOLS -->
<section id="tools" class="max-w-5xl mx-auto px-6 py-16">
  <h2 class="text-2xl font-bold mb-8">Tools & Software</h2>
  <div id="icons" class="grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-6"></div>
</section>

<!-- PORTFOLIO IMAGES -->
<section id="portfolio" class="max-w-6xl mx-auto px-6 py-16">
  <h2 class="text-2xl font-bold mb-8">Portfolio</h2>
  <div id="gallery" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
  <div class="mt-6 text-center">
    <button id="toggleImages" class="btn">Show more</button>
  </div>
</section>

<!-- PORTFOLIO VIDEOS -->
<section id="videos" class="max-w-6xl mx-auto px-6 py-16">
  <h2 class="text-2xl font-bold mb-8">Videos</h2>
  <div id="videoGallery" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
  <div class="mt-6 text-center">
    <button id="toggleVideos" class="btn">Show more</button>
  </div>
</section>

<!-- LIGHTBOX -->
<div id="lightbox" class="fixed inset-0 hidden z-[2147483647]">
  <div class="absolute inset-0 bg-black/90"></div>
  <div class="relative h-full w-full flex items-center justify-center p-4">
    <button id="lbClose" class="absolute top-4 right-4 btn">✕ Close</button>
    <button id="lbPrev" class="absolute left-4 top-1/2 -translate-y-1/2 btn">⟵ Prev</button>
    <button id="lbNext" class="absolute right-4 top-1/2 -translate-y-1/2 btn">Next ⟶</button>
    <img id="lbImg" src="" alt="" class="block max-w-[92vw] max-h-[90vh] object-contain rounded-2xl border border-white/10 shadow-lg" />
  </div>
</div>

<script>
// ================== PARTICLE BACKGROUND ==================
const c = document.getElementById("bg"), ctx = c.getContext("2d");
let w, h; function resize(){w=window.innerWidth;h=window.innerHeight;c.width=w;c.height=h;} resize(); window.addEventListener("resize",resize);
const COUNT=12,BASE_RADIUS=220,STIFFNESS=15,DAMPING=0.88,SWIRL=2,LINK_DIST=190,NOISE=180;
const anchor={x:w*0.5,y:h*0.45};const mouse={x:anchor.x,y:anchor.y,active:false};
const pts=[];for(let i=0;i<COUNT;i++){pts.push({x:anchor.x,y:anchor.y,vx:0,vy:0,targetA:(Math.PI*2/COUNT)*i});}
function loop(){ctx.clearRect(0,0,w,h);
  ctx.strokeStyle="rgba(255,255,255,0.05)";
  for(let gx=0;gx<w;gx+=96){ctx.beginPath();ctx.moveTo(gx,0);ctx.lineTo(gx,h);ctx.stroke();}
  for(let gy=0;gy<h;gy+=96){ctx.beginPath();ctx.moveTo(0,gy);ctx.lineTo(w,gy);ctx.stroke();}
  for(const p of pts){const targetX=(mouse.x||anchor.x)+BASE_RADIUS*Math.cos(p.targetA+performance.now()*0.001*SWIRL);
    const targetY=(mouse.y||anchor.y)+BASE_RADIUS*Math.sin(p.targetA+performance.now()*0.001*SWIRL);
    const ax=(targetX-p.x)*STIFFNESS*0.001+(Math.random()-0.5)*NOISE*0.001;
    const ay=(targetY-p.y)*STIFFNESS*0.001+(Math.random()-0.5)*NOISE*0.001;
    p.vx=(p.vx+ax)*DAMPING; p.vy=(p.vy+ay)*DAMPING; p.x+=p.vx; p.y+=p.vy;
  }
  for(let i=0;i<pts.length;i++){for(let j=i+1;j<pts.length;j++){const a=pts[i],b=pts[j];
    const dx=a.x-b.x,dy=a.y-b.y,d=Math.hypot(dx,dy);if(d<LINK_DIST){ctx.strokeStyle="rgba(255,255,255,"+(1-d/LINK_DIST)*0.25+")";
      ctx.beginPath();ctx.moveTo(a.x,a.y);ctx.lineTo(b.x,b.y);ctx.stroke();}}}
  ctx.fillStyle="rgba(255,255,255,0.9)";
  for(const p of pts){ctx.beginPath();ctx.arc(p.x,p.y,3,0,Math.PI*2);ctx.fill();}
  requestAnimationFrame(loop);} loop();
window.addEventListener("mousemove",e=>{mouse.x=e.clientX;mouse.y=e.clientY;mouse.active=true;});

// ================== HELPERS ==================
async function fetchJSON(url){ try{const res=await fetch(url); if(!res.ok) throw 0; return await res.json(); } catch(e){ return null; } }
function probe(src){ return new Promise(res=>{ const im=new Image(); im.onload=()=>res(true); im.onerror=()=>res(false); im.src=src; }); }

// ================== IMAGE GALLERY ==================
const galleryEl=document.getElementById("gallery"), toggleImagesBtn=document.getElementById("toggleImages");
const PAGE_SIZE=6; let imagesExpanded=false,imageList=[],currentIndex=0;
async function initImages(){
  const manifest=await fetchJSON("Media/images/manifest.json");
  if(manifest){imageList=manifest;} 
  else {
    const found=[]; for(let i=1;i<=200;i++){const n2=i.toString().padStart(2,"0");
      const thumb=`Media/images/thumbs/${n2}.jpg`, full=`Media/images/${n2}.jpg`;
      /* eslint-disable no-await-in-loop */
      if(await probe(thumb) && await probe(full)){ found.push({thumb,full}); }
    }
    imageList=found;
  }
  renderImages();
}
function renderImages(){
  galleryEl.innerHTML=""; const toShow=imagesExpanded?imageList.length:Math.min(PAGE_SIZE,imageList.length);
  for(let i=0;i<toShow;i++){galleryEl.appendChild(imgCard(imageList[i],i));}
  toggleImagesBtn.textContent=imagesExpanded?"Show less":"Show more";
}
function imgCard(entry,idx){
  const btn=document.createElement("button"); btn.className="group relative aspect-[4/3] overflow-hidden rounded-2xl border border-white/10 bg-white/5";
  btn.dataset.index=idx; btn.addEventListener("click",openLightbox);
  const img=document.createElement("img"); img.src=entry.thumb; img.loading="lazy"; img.className="h-full w-full object-cover";
  const glow=document.createElement("div"); glow.className="absolute inset-0 opacity-0 group-hover:opacity-100 transition bg-gradient-to-tr from-cyan-300/10";
  btn.appendChild(img); btn.appendChild(glow); return btn;
}
toggleImagesBtn.addEventListener("click",()=>{imagesExpanded=!imagesExpanded; renderImages();});

// ================== LIGHTBOX ==================
const lb=document.getElementById("lightbox"), lbImg=document.getElementById("lbImg");
document.getElementById("lbClose").onclick=()=>{lb.classList.add("hidden"); document.body.style.overflow="auto";};
document.getElementById("lbPrev").onclick=()=>show(-1); document.getElementById("lbNext").onclick=()=>show(1);
function openLightbox(e){currentIndex=parseInt(e.currentTarget.dataset.index,10); lbImg.src=imageList[currentIndex].full; lb.classList.remove("hidden"); document.body.style.overflow="hidden";}
function show(d){currentIndex=(currentIndex+d+imageList.length)%imageList.length; lbImg.src=imageList[currentIndex].full;}

// ================== VIDEO GALLERY ==================
const videoGallery=document.getElementById("videoGallery"), toggleVideosBtn=document.getElementById("toggleVideos");
let videosExpanded=false,videoList=[];
async function initVideos(){
  const manifest=await fetchJSON("Media/Videos/manifest.json");
  if(!manifest){document.getElementById("videos").classList.add("hidden"); return;}
  videoList=manifest; renderVideos();
}
function renderVideos(){
  videoGallery.innerHTML=""; const toShow=videosExpanded?videoList.length:Math.min(PAGE_SIZE,videoList.length);
  for(let i=0;i<toShow;i++){videoGallery.appendChild(videoCard(videoList[i]));}
  toggleVideosBtn.textContent=videosExpanded?"Show less":"Show more";
}
function videoCard(src){
  const v=document.createElement("video"); v.src=src; v.controls=true; v.className="w-full rounded-2xl border border-white/10 bg-black"; v.preload="metadata"; return v;
}
toggleVideosBtn.addEventListener("click",()=>{videosExpanded=!videosExpanded; renderVideos();});

// ================== TOOLS ICONS ==================
const iconsEl=document.getElementById("icons");
async function initIcons(){
  const manifest=await fetchJSON("Media/icons/manifest.json"); if(!manifest) return;
  manifest.forEach((entry,i)=>{
    const wrap=document.createElement("div"); wrap.className="relative tool-icon flex items-center justify-center";
    const img=document.createElement("img"); img.src=entry.src; img.alt=entry.label; img.className="h-12 w-12 object-contain";
    const tip=document.createElement("div"); tip.className="tooltip"; tip.textContent=entry.label;
    wrap.appendChild(img); wrap.appendChild(tip); iconsEl.appendChild(wrap);
  });
}

// ================== INIT ==================
initImages(); initVideos(); initIcons();
</script>
</body>
</html>
