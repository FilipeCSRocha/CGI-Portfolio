<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Filipe Rocha — CGI Portfolio</title>
  <script src="https://cdn.tailwindcss.com/3.4.10"></script>
  <meta name="description" content="Senior CGI Visualiser — photoreal stills, cinematic animation, and real-time visualisation for architecture and products." />
  <link rel="icon" href='data:image/svg+xml,<?xml version="1.0" encoding="UTF-8"?><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><defs><linearGradient id="g1" x1="0" y1="0" x2="1" y2="1"><stop stop-color="%2300e5ff"/><stop offset="1" stop-color="%2380ffea"/></linearGradient></defs><rect width="64" height="64" rx="12" fill="%230a0f12"/><path d="M16 20h22v6H22v6h14v6H22v10h-6z" fill="url(%23g1)"/><path d="M34 20h14c6 0 10 4 10 9 0 4-3 7-7 8l8 11h-8l-7-10h-4v10h-6zM40 26v6h8c2 0 4-1 4-3s-2-3-4-3z" fill="%23e8feff" opacity="0.9"/></svg>' />
  <style>
    html { scroll-behavior: smooth; }
    body { background:#0a0f12; color:#fff; }
    .btn { border:1px solid rgba(255,255,255,.15); background:rgba(255,255,255,.06); padding:.5rem 1rem; border-radius:.75rem; }
    .btn:hover { background:rgba(255,255,255,.12); }
    .card { border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.05); border-radius:1.25rem; }
    .thumb { filter:grayscale(80%); transition:transform .4s ease, filter .3s ease; }
    .group:hover .thumb { filter:grayscale(30%); transform:scale(1.04); }
    .tool-badge { border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.05); border-radius:.65rem; padding:.25rem .6rem; font-size:.85rem; color:rgba(255,255,255,.9); }
    #imgLightbox, #vidLightbox { display:none; }
    @media (prefers-reduced-motion: reduce){ *{ animation:none !important; transition:none !important; } }
  </style>
</head>
<body class="min-h-screen selection:bg-cyan-300/20">

  <!-- HERO -->
  <header class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10 bg-[radial-gradient(1200px_600px_at_10%_-10%,rgba(0,255,255,.15),transparent),radial-gradient(900px_500px_at_120%_10%,rgba(0,180,255,.12),transparent)]"></div>
    <section class="max-w-6xl mx-auto px-6 py-24 text-center">
      <h1 class="text-4xl md:text-6xl font-semibold tracking-tight">Filipe Rocha</h1>
      <p class="mt-3 text-lg md:text-xl text-white/80">Senior CGI Visualiser</p>
      <div class="mt-8 flex items-center justify-center gap-3">
        <a href="#portfolio" class="btn">View My Work</a>
        <a href="#contact" class="btn">Contact</a>
      </div>
    </section>
  </header>

  <!-- ABOUT -->
  <section id="about" class="max-w-6xl mx-auto px-6 py-16">
    <div class="grid gap-8 md:grid-cols-[1fr_1.6fr] items-start">
      <div class="flex justify-center">
        <div class="relative w-48 h-48 md:w-56 md:h-56 rounded-full overflow-hidden border border-white/10 shadow-[0_0_40px_rgba(160,240,255,0.25)]">
          <img id="profileImg" src="" alt="Portrait of Filipe Rocha" class="h-full w-full object-cover" />
        </div>
      </div>
      <div class="space-y-8">
        <div class="card p-6 leading-relaxed text-white/85">
          I create high-end architectural visualisation — <span class="text-white">photoreal stills, cinematic animations, and real-time experiences</span>.
          Full pipeline from CAD through modeling, materials, lighting, rendering, and post-production.
        </div>

        <!-- Tools & Pipeline -->
        <div class="card p-6">
          <h3 class="mb-4 font-medium text-white/90">Tools &amp; Pipeline <span class="text-white/50 text-sm">(used across the work below)</span></h3>
          <div class="space-y-6">
            <div>
              <h4 class="text-sm font-semibold text-cyan-300/80 mb-2">Modeling &amp; Rendering</h4>
              <div class="flex flex-wrap gap-2">
                <span class="tool-badge">3ds Max</span>
                <span class="tool-badge">V-Ray</span>
                <span class="tool-badge">Corona</span>
                <span class="tool-badge">Chaos Vantage</span>
              </div>
            </div>
            <div>
              <h4 class="text-sm font-semibold text-cyan-300/80 mb-2">Procedural / Crowd</h4>
              <div class="flex flex-wrap gap-2">
                <span class="tool-badge">Forest Pack</span>
                <span class="tool-badge">RailClone</span>
                <span class="tool-badge">Chaos Anima</span>
              </div>
            </div>
            <div>
              <h4 class="text-sm font-semibold text-cyan-300/80 mb-2">Post-Production</h4>
              <div class="flex flex-wrap gap-2">
                <span class="tool-badge">Photoshop</span>
                <span class="tool-badge">After Effects</span>
                <span class="tool-badge">Premiere Pro</span>
                <span class="tool-badge">DaVinci Resolve</span>
              </div>
            </div>
            <div>
              <h4 class="text-sm font-semibold text-cyan-300/80 mb-2">Real-Time</h4>
              <div class="flex flex-wrap gap-2">
                <span class="tool-badge">Unreal Engine</span>
              </div>
            </div>

            <!-- Icon grid (kept for quick scanning) -->
            <div class="mt-2 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-3" id="toolIcons">
              <!-- 1..12 icons by file order -->
              <img src="Media/icons/1.png" alt="3ds Max" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/2.png" alt="V-Ray" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/3.png" alt="Corona" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/4.png" alt="Chaos Vantage" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/5.png" alt="Chaos Anima" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/6.png" alt="Forest Pack" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/7.png" alt="RailClone" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/8.png" alt="Photoshop" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/9.png" alt="After Effects" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/10.png" alt="Premiere Pro" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/11.png" alt="DaVinci Resolve" class="h-8 w-8 object-contain mx-auto" />
              <img src="Media/icons/12.png" alt="Unreal Engine" class="h-8 w-8 object-contain mx-auto" />
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PORTFOLIO -->
  <section id="portfolio" class="max-w-6xl mx-auto px-6 py-16">
    <h2 class="text-2xl md:text-3xl font-semibold tracking-tight mb-6">Portfolio</h2>
    <div id="gallery" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"></div>
    <div id="galleryActions" class="mt-8 flex justify-center">
      <button id="toggleImages" class="btn">Show more</button>
    </div>
  </section>

  <!-- VIDEOS -->
  <section id="videos" class="max-w-6xl mx-auto px-6 py-16">
    <h2 class="text-2xl md:text-3xl font-semibold tracking-tight mb-6">Videos</h2>
    <div id="videoGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"></div>
    <div id="videoActions" class="mt-8 flex justify-center">
      <button id="toggleVideos" class="btn">Show more</button>
    </div>
  </section>

  <!-- RESUME -->
  <section id="resume" class="max-w-6xl mx-auto px-6 pb-24">
    <h2 class="text-2xl md:text-3xl font-semibold tracking-tight mb-6">Resume</h2>
    <div class="card p-6">
      <ul class="space-y-5">
        <li class="grid gap-2 md:grid-cols-[1.2fr_1fr]">
          <div>
            <div class="text-white/95 font-medium">CGI Artist (Senior)</div>
            <div class="text-white/70 text-sm">Trident Marketing Anglia Ltd · Ipswich, UK</div>
          </div>
          <div class="text-white/60 text-sm md:text-right">Feb 2022 – Present</div>
        </li>
        <li class="grid gap-2 md:grid-cols-[1.2fr_1fr]">
          <div>
            <div class="text-white/95 font-medium">3D Visualiser (Freelance)</div>
            <div class="text-white/70 text-sm">London, UK</div>
          </div>
          <div class="text-white/60 text-sm md:text-right">Jul 2020 – Feb 2022</div>
        </li>
        <li class="grid gap-2 md:grid-cols-[1.2fr_1fr]">
          <div>
            <div class="text-white/95 font-medium">CGI Artist</div>
            <div class="text-white/70 text-sm">ThinkBDW · Colchester, UK</div>
          </div>
          <div class="text-white/60 text-sm md:text-right">Apr 2021 – Sep 2021</div>
        </li>
        <!-- Keep earlier roles compact on site; full detail on LinkedIn/CV -->
      </ul>
    </div>
  </section>

  <!-- CONTACT -->
  <footer id="contact" class="border-t border-white/10 bg-white/5">
    <div class="max-w-6xl mx-auto px-6 py-12">
      <div class="grid gap-4 md:grid-cols-2 items-center">
        <div>
          <h3 class="text-xl font-semibold">Let’s work together</h3>
          <p class="text-white/70">Available for freelance and collaboration.</p>
        </div>
        <div class="flex justify-start md:justify-end gap-3">
          <a class="btn" href="mailto:hello@example.com">Email</a>
          <a class="btn" href="https://www.linkedin.com/in/filipecsrocha/" target="_blank" rel="noreferrer">LinkedIn</a>
          <a class="btn" href="#" target="_blank" rel="noreferrer">ArtStation</a>
          <a class="btn" href="#" target="_blank" rel="noreferrer">Vimeo</a>
        </div>
      </div>
      <p class="mt-6 text-xs text-white/50">© <span id="year"></span> Filipe Rocha. All rights reserved.</p>
    </div>
  </footer>

  <!-- ===== LIGHTBOXES ===== -->
  <!-- IMAGE LIGHTBOX -->
  <div id="imgLightbox" class="fixed inset-0 z-[9999]">
    <div class="absolute inset-0 bg-black/90"></div>
    <div class="relative h-full w-full flex items-center justify-center p-4">
      <button id="imgClose" class="absolute top-4 right-4 btn" aria-label="Close image">✕ Close</button>
      <button id="imgPrev" class="absolute left-4 top-1/2 -translate-y-1/2 btn" aria-label="Previous image">⟵ Prev</button>
      <button id="imgNext" class="absolute right-4 top-1/2 -translate-y-1/2 btn" aria-label="Next image">Next ⟶</button>
      <img id="imgBig" src="" alt="" class="block max-w-[92vw] max-h-[90vh] object-contain rounded-2xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)]" />
    </div>
  </div>

  <!-- VIDEO LIGHTBOX -->
  <div id="vidLightbox" class="fixed inset-0 z-[9998]">
    <div class="absolute inset-0 bg-black/90"></div>
    <div class="relative h-full w-full flex items-center justify-center p-4">
      <button id="vidClose" class="absolute top-4 right-4 btn" aria-label="Close video">✕ Close</button>
      <video id="vidPlayer" class="block max-w-[92vw] max-h-[90vh] rounded-2xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)]" controls playsinline></video>
    </div>
  </div>

<script>
/* ===== UTILITIES ===== */
const $ = (q,scope=document)=>scope.querySelector(q);
const $$ = (q,scope=document)=>Array.from(scope.querySelectorAll(q));
function headExists(url){ return fetch(url,{method:'HEAD',cache:'no-store'}).then(r=>r.ok).catch(()=>false); }

/* Year */
$('#year').textContent = new Date().getFullYear();

/* ===== PROFILE IMAGE (fallback to first portfolio image) ===== */
(async function(){
  const candidates = [
    "Media/images/Profile.jpg","Media/images/Profile.JPG","Media/images/Profile.jpeg","Media/images/Profile.JPEG",
    "Media/images/profile.jpg","Media/images/profile.JPG","Media/images/profile.jpeg","Media/images/profile.JPEG"
  ];
  let src = "";
  for (const c of candidates){ if (await new Promise(res=>{ const im=new Image(); im.onload=()=>res(true); im.onerror=()=>res(false); im.src=c; })) { src=c; break; } }
  if (!src) src = "Media/images/01.jpg";
  $('#profileImg').src = src;
})();

/* ===== IMAGES (manifest-driven) ===== */
(async function(){
  const galleryEl = $('#gallery');
  const toggleBtn = $('#toggleImages');
  const PAGE_SIZE = 6;

  let files = [];   // filenames only
  let entries = []; // {file, thumb}
  let expanded = false;

  async function loadList(){
    const res = await fetch("Media/images/List.txt", {cache:'no-store'});
    if (!res.ok) throw new Error("Images List.txt not found");
    const t = (await res.text()).split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
    return t.filter(f => !/^profile\.(?:jpe?g)$/i.test(f));
  }
  async function buildEntries(fs){
    return Promise.all(fs.map(async f=>{
      const full = `Media/images/${f}`;
      const thumb = await headExists(`Media/images/thumbs/${f}`) ? `Media/images/thumbs/${f}` : full;
      return { file:f, full, thumb };
    }));
  }

  function makeCard(entry, idx){
    const btn = document.createElement('button');
    btn.className = "group relative aspect-[4/3] overflow-hidden rounded-2xl border border-white/10 bg-white/5 focus:outline-none";
    btn.dataset.index = idx;

    const img = document.createElement('img');
    img.src = entry.thumb; img.loading="lazy"; img.decoding="async";
    img.className = "thumb h-full w-full object-cover";
    btn.appendChild(img);

    btn.addEventListener('click', openImageLightbox);
    return btn;
  }

  function render(){
    galleryEl.innerHTML = "";
    const toShow = expanded ? entries.length : Math.min(PAGE_SIZE, entries.length);
    for (let i=0;i<toShow;i++) galleryEl.appendChild(makeCard(entries[i], i));
    toggleBtn.textContent = expanded ? "Show less" : "Show more";
    $('#galleryActions').classList.toggle('hidden', entries.length <= PAGE_SIZE);
  }

  /* Image Lightbox */
  const lb = $('#imgLightbox');
  const lbImg = $('#imgBig');
  const lbClose = $('#imgClose');
  const lbPrev = $('#imgPrev');
  const lbNext = $('#imgNext');
  let currentImg = 0;

  function openImageLightbox(e){
    currentImg = parseInt(e.currentTarget.dataset.index,10) || 0;
    lbImg.src = entries[currentImg].full;
    lb.style.display = "block";
    document.body.style.overflow = "hidden";
    lbClose.focus();
  }
  function closeImageLightbox(){ lb.style.display = "none"; document.body.style.overflow = ""; }
  function stepImage(d){
    currentImg = (currentImg + d + entries.length) % entries.length;
    lbImg.src = entries[currentImg].full;
  }
  lbClose.addEventListener('click', closeImageLightbox);
  lbPrev.addEventListener('click', ()=>stepImage(-1));
  lbNext.addEventListener('click', ()=>stepImage(1));
  window.addEventListener('keydown', (e)=>{
    if (lb.style.display !== "block") return;
    if (e.key === 'Escape') closeImageLightbox();
    if (e.key === 'ArrowLeft') stepImage(-1);
    if (e.key === 'ArrowRight') stepImage(1);
  });

  toggleBtn.addEventListener('click', ()=>{ expanded = !expanded; render(); });

  try {
    files = await loadList();
    entries = await buildEntries(files);
    if (!entries.length){
      galleryEl.innerHTML = '<div class="card p-6 text-white/70">Images coming soon.</div>';
      $('#galleryActions').classList.add('hidden');
    } else {
      render();
    }
  } catch(err){
    console.warn('[Images]', err);
    galleryEl.innerHTML = '<div class="card p-6 text-white/70">Images coming soon.</div>';
    $('#galleryActions').classList.add('hidden');
  }
})();

/* ===== VIDEOS (manifest-driven) ===== */
(async function(){
  const grid = $('#videoGrid');
  const toggleBtn = $('#toggleVideos');
  const PAGE = 6;

  let files = []; // filenames (e.g., 01.mp4)
  let expanded = false;

  async function loadList(){
    const res = await fetch("Media/videos/List.txt", {cache:'no-store'});
    if (!res.ok) throw new Error("Videos List.txt not found");
    return (await res.text()).split(/\r?\n/).map(s=>s.trim()).filter(Boolean);
  }

  function makeCard(filename, idx){
    const btn = document.createElement('button');
    btn.className = "group relative aspect-[4/3] overflow-hidden rounded-2xl border border-white/10 bg-white/5 focus:outline-none";
    btn.dataset.file = filename; // <-- bind exact file
    btn.dataset.idx = idx;

    const vid = document.createElement('video');
    vid.className = "thumb h-full w-full object-cover opacity-95";
    vid.muted = true; vid.playsInline = true; vid.preload = "metadata";
    const poster = filename.replace(/\.\w+$/, '.jpg');
    vid.poster = `Media/videos/${poster}`;
    const mp4 = document.createElement('source'); mp4.src = `Media/videos/${filename}`; mp4.type="video/mp4";
    vid.appendChild(mp4);

    btn.addEventListener('mouseenter', ()=>{ if (matchMedia('(hover:hover)').matches) vid.play().catch(()=>{}); });
    btn.addEventListener('mouseleave', ()=>{ vid.pause(); try{ vid.currentTime=0; }catch(_){} });

    const badge = document.createElement('div');
    badge.className = "absolute inset-0 grid place-items-center pointer-events-none";
    const span = document.createElement('span');
    span.className = "rounded-full border border-white/50 bg-black/40 backdrop-blur px-3 py-1 text-sm";
    span.textContent = "▶ Play";
    badge.appendChild(span);

    btn.appendChild(vid); btn.appendChild(badge);
    btn.addEventListener('click', openVideoLightbox);
    return btn;
  }

  function render(){
    grid.innerHTML = "";
    const toShow = expanded ? files.length : Math.min(PAGE, files.length);
    for (let i=0;i<toShow;i++) grid.appendChild(makeCard(files[i], i));
    toggleBtn.textContent = expanded ? "Show less" : "Show more";
    $('#videoActions').classList.toggle('hidden', files.length <= PAGE);
  }

  /* Video Lightbox — FIXED to always load the clicked video */
  const vLB = $('#vidLightbox');
  const vClose = $('#vidClose');
  const vPlayer = $('#vidPlayer');

  function openVideoLightbox(e){
    const file = e.currentTarget.dataset.file; // ← exact file clicked
    // Reset player fully before loading new sources (prevents “first video plays again” bug)
    vPlayer.pause();
    vPlayer.removeAttribute('src');
    vPlayer.innerHTML = "";      // clear any previous <source>
    vPlayer.load();              // reset
    const src = document.createElement('source');
    src.src = `Media/videos/${file}`;
    src.type = "video/mp4";
    vPlayer.appendChild(src);
    vPlayer.load();              // load the new source
    vLB.style.display = "block";
    document.body.style.overflow = "hidden";
    vPlayer.play().catch(()=>{});
    vClose.focus();
  }

  function closeVideoLightbox(){
    vLB.style.display = "none";
    document.body.style.overflow = "";
    vPlayer.pause();
    vPlayer.removeAttribute('src');
    vPlayer.innerHTML = "";
    vPlayer.load();
  }
  vClose.addEventListener('click', closeVideoLightbox);
  window.addEventListener('keydown', (e)=>{ if (vLB.style.display==="block" && e.key==="Escape") closeVideoLightbox(); });
  vLB.addEventListener('click', (e)=>{ if (e.target === vLB) closeVideoLightbox(); });

  try {
    files = await loadList();
    if (!files.length){
      grid.innerHTML = '<div class="card p-6 text-white/70">Videos coming soon.</div>';
      $('#videoActions').classList.add('hidden');
    } else {
      render();
    }
  } catch(err){
    console.warn('[Videos]', err);
    grid.innerHTML = '<div class="card p-6 text-white/70">Videos coming soon.</div>';
    $('#videoActions').classList.add('hidden');
  }

  toggleBtn.addEventListener('click', ()=>{ expanded = !expanded; render(); });
})();
</script>
</body>
</html>
